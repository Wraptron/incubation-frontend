{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/kishoremadhavan/Desktop/Incubationn-Screen/incubation-frontend/lib/config.ts"],"sourcesContent":["export const backendUrl =\n  process.env.NEXT_PUBLIC_API_URL || \"http://65.1.107.13:5001\";\n"],"names":[],"mappings":";;;;AAAO,MAAM,aACX,+DAAmC"}},
    {"offset": {"line": 55, "column": 0}, "map": {"version":3,"sources":["file:///Users/kishoremadhavan/Desktop/Incubationn-Screen/incubation-frontend/app/api/evaluations/application/%5BapplicationId%5D/all/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\";\nimport { createClient } from \"@supabase/supabase-js\";\nimport { backendUrl } from \"@/lib/config\";\n\nconst supabaseUrl =\n  process.env.NEXT_PUBLIC_SUPABASE_URL ||\n  \"https://dfzfmtthyvwltwwmntmd.supabase.co\";\nconst supabaseAnonKey =\n  process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY ||\n  \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRmemZtdHRoeXZ3bHR3d21udG1kIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2ODQwNDk0NiwiZXhwIjoyMDgzOTgwOTQ2fQ.m8DKbf04d5Awu99sYyTIpv15xvnkoXV3WTOlk4GP8HE\";\n\nexport async function GET(\n  request: NextRequest,\n  { params }: { params: Promise<{ applicationId: string }> }\n) {\n  try {\n    // Await params in Next.js 15+\n    const resolvedParams = await params;\n    const applicationId = resolvedParams.applicationId;\n\n    console.log(\"=== Frontend API Route - GET All Evaluations ===\");\n    console.log(\"Application ID from params:\", applicationId);\n\n    // Validate applicationId\n    const uuidRegex =\n      /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;\n    if (\n      !applicationId ||\n      applicationId === \"undefined\" ||\n      !uuidRegex.test(applicationId)\n    ) {\n      console.error(\"Invalid applicationId in GET all route:\", applicationId);\n      return NextResponse.json(\n        { error: \"Invalid application ID\", received: applicationId },\n        { status: 400 }\n      );\n    }\n\n    // Get auth token from request\n    const authHeader = request.headers.get(\"authorization\");\n    if (!authHeader) {\n      return NextResponse.json({ error: \"Unauthorized\" }, { status: 401 });\n    }\n\n    // Create Supabase client with user's token\n    const supabase = createClient(supabaseUrl, supabaseAnonKey, {\n      global: {\n        headers: {\n          Authorization: authHeader,\n        },\n      },\n    });\n\n    // Get current user\n    const {\n      data: { user },\n      error: userError,\n    } = await supabase.auth.getUser();\n\n    if (userError || !user) {\n      return NextResponse.json({ error: \"Unauthorized\" }, { status: 401 });\n    }\n\n    // Check if user is a manager\n    const { data: profile } = await supabase\n      .from(\"user_profiles\")\n      .select(\"role\")\n      .eq(\"id\", user.id)\n      .single();\n\n    if (!profile || profile.role !== \"manager\") {\n      return NextResponse.json(\n        { error: \"Forbidden - Manager access required\" },\n        { status: 403 }\n      );\n    }\n\n    // Call backend API\n    const response = await fetch(\n      `${backendUrl}/api/evaluations/application/${applicationId}/all`,\n      {\n        headers: {\n          Authorization: authHeader,\n        },\n      }\n    );\n\n    const data = await response.json();\n\n    if (!response.ok) {\n      return NextResponse.json(\n        { error: data.error || \"Failed to fetch evaluations\" },\n        { status: response.status }\n      );\n    }\n\n    return NextResponse.json(data);\n  } catch (error: any) {\n    console.error(\"Error fetching evaluations:\", error);\n    return NextResponse.json(\n      { error: \"Failed to fetch evaluations\" },\n      { status: 500 }\n    );\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAEA,MAAM,cACJ,gFACA;AACF,MAAM,kBACJ,mQACA;AAEK,eAAe,IACpB,OAAoB,EACpB,EAAE,MAAM,EAAkD;IAE1D,IAAI;QACF,8BAA8B;QAC9B,MAAM,iBAAiB,MAAM;QAC7B,MAAM,gBAAgB,eAAe,aAAa;QAElD,QAAQ,GAAG,CAAC;QACZ,QAAQ,GAAG,CAAC,+BAA+B;QAE3C,yBAAyB;QACzB,MAAM,YACJ;QACF,IACE,CAAC,iBACD,kBAAkB,eAClB,CAAC,UAAU,IAAI,CAAC,gBAChB;YACA,QAAQ,KAAK,CAAC,2CAA2C;YACzD,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;gBAA0B,UAAU;YAAc,GAC3D;gBAAE,QAAQ;YAAI;QAElB;QAEA,8BAA8B;QAC9B,MAAM,aAAa,QAAQ,OAAO,CAAC,GAAG,CAAC;QACvC,IAAI,CAAC,YAAY;YACf,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAe,GAAG;gBAAE,QAAQ;YAAI;QACpE;QAEA,2CAA2C;QAC3C,MAAM,WAAW,IAAA,gMAAY,EAAC,aAAa,iBAAiB;YAC1D,QAAQ;gBACN,SAAS;oBACP,eAAe;gBACjB;YACF;QACF;QAEA,mBAAmB;QACnB,MAAM,EACJ,MAAM,EAAE,IAAI,EAAE,EACd,OAAO,SAAS,EACjB,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;QAE/B,IAAI,aAAa,CAAC,MAAM;YACtB,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAe,GAAG;gBAAE,QAAQ;YAAI;QACpE;QAEA,6BAA6B;QAC7B,MAAM,EAAE,MAAM,OAAO,EAAE,GAAG,MAAM,SAC7B,IAAI,CAAC,iBACL,MAAM,CAAC,QACP,EAAE,CAAC,MAAM,KAAK,EAAE,EAChB,MAAM;QAET,IAAI,CAAC,WAAW,QAAQ,IAAI,KAAK,WAAW;YAC1C,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAsC,GAC/C;gBAAE,QAAQ;YAAI;QAElB;QAEA,mBAAmB;QACnB,MAAM,WAAW,MAAM,MACrB,GAAG,6HAAU,CAAC,6BAA6B,EAAE,cAAc,IAAI,CAAC,EAChE;YACE,SAAS;gBACP,eAAe;YACjB;QACF;QAGF,MAAM,OAAO,MAAM,SAAS,IAAI;QAEhC,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO,KAAK,KAAK,IAAI;YAA8B,GACrD;gBAAE,QAAQ,SAAS,MAAM;YAAC;QAE9B;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,+BAA+B;QAC7C,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAA8B,GACvC;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}