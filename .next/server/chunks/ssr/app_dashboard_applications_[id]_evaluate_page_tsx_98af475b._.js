module.exports=[92331,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(78560),f=a.i(46893),g=a.i(17171),h=a.i(40695),i=a.i(55857);let j=[{id:"need",label:"1. Need",description:"Why is the applicant's idea/innovation required in the market? What customer needs are being satisfied or will be satisfied through their idea/innovation? Are they able to provide some background information or insights?",scoreKey:"needScore",commentKey:"needComment"},{id:"novelty",label:"2. Novelty",description:"What is the novelty or uniqueness of the idea/innovation. What is the unique selling proposition (USP)? Does the applicant have any intellectual property rights over this idea?",scoreKey:"noveltyScore",commentKey:"noveltyComment"},{id:"feasibility",label:"3. Feasibility & Scalability",description:"How feasible is the solution? If the applicant is at idea stage, then how will the idea be implemented in future? If the applicant is at a prototype/product stage, then are they providing any technical details of the idea/innovation. Could the applicant provide details about its pilot and how is it currently being implemented? How scalable is the idea/innovation (in terms of production/ distribution/ consumption/ service/ market locations and/or application etc.)?",scoreKey:"feasibilityScalabilityScore",commentKey:"feasibilityScalabilityComment"},{id:"market",label:"4. Market Potential",description:"What is the applicant's understanding of the target market & who are the customers (buyers and/or consumers)? Are there any competitors or alternative solutions available in the market? What marketing strategy or marketing plan do they have to target this market and acquire customers?",scoreKey:"marketPotentialScore",commentKey:"marketPotentialComment"},{id:"impact",label:"5. Impact",description:"At the end, what kind of overall business, socio-economic or environmental impact can the idea/innovation have on the stakeholders? How do you think will it affect or change the lives of people?",scoreKey:"impactScore",commentKey:"impactComment"}];function k(){let a=(0,d.useRouter)(),k=(0,d.useParams)(),[l,m]=(0,c.useState)(null),[n,o]=(0,c.useState)(null),[p,q]=(0,c.useState)(!0),[r,s]=(0,c.useState)(!1),[t,u]=(0,c.useState)(""),[v,w]=(0,c.useState)(null),[x,y]=(0,c.useState)(""),[z,A]=(0,c.useState)({needScore:"5",noveltyScore:"5",feasibilityScalabilityScore:"5",marketPotentialScore:"5",impactScore:"5",needComment:"",noveltyComment:"",feasibilityScalabilityComment:"",marketPotentialComment:"",impactComment:"",overallComment:""}),B=a=>!(!a||Array.isArray(a))&&/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(a);(0,c.useEffect)(()=>{if(console.log("=== EvaluatePage Mount ==="),console.log("Params:",k),console.log("Params.id:",k?.id),console.log("Params.id type:",typeof k?.id),!k?.id){console.error("No params.id found - params not loaded yet"),y("Loading application...");return}if("undefined"===k.id||"null"===k.id){console.error("params.id is string 'undefined' or 'null'"),y("Invalid application ID"),q(!1),setTimeout(()=>a.push("/dashboard"),2e3);return}if(!B(k.id)){console.error("params.id is not a valid UUID:",k.id),y("Invalid application ID format"),q(!1),setTimeout(()=>a.push("/dashboard"),2e3);return}console.log("Valid params.id found:",k.id),C()},[k?.id]);let C=async()=>{try{if(!k?.id||!B(k.id)){console.error("Invalid application ID in checkUser"),a.push("/dashboard");return}let{data:{user:b}}=await e.supabase.auth.getUser();if(!b)return void a.push("/login");let{data:c}=await e.supabase.from("user_profiles").select("role").eq("id",b.id).single();if(!c||"reviewer"!==c.role)return void a.push("/dashboard");w({id:b.id,role:c.role}),await Promise.all([D(),E()])}catch(b){console.error("Error checking user:",b),a.push("/login")}finally{q(!1)}},D=async()=>{try{if(!k?.id||!B(k.id))return void console.error("Cannot fetch application: invalid ID");let b=process.env.NEXT_PUBLIC_API_URL||"http://65.1.107.13:5000";console.log("Fetching application:",k.id);let c=await fetch(`${b}/api/applications/${k.id}`);if(c.ok){let a=await c.json();m(a.application)}else console.error("Failed to fetch application"),y("Failed to load application"),setTimeout(()=>a.push("/dashboard"),2e3)}catch(b){console.error("Error fetching application:",b),y("Failed to load application"),setTimeout(()=>a.push("/dashboard"),2e3)}},E=async()=>{try{if(!k?.id||!B(k.id))return void console.error("Cannot fetch evaluation: invalid ID");let{data:{session:a}}=await e.supabase.auth.getSession();if(!a)return;if(!k.id||"undefined"===k.id||!B(k.id))return void console.error("Invalid params.id in fetchEvaluation:",k.id);console.log("Fetching evaluation for application ID:",k.id);let b=await fetch(`/api/evaluations/application/${k.id}`,{headers:{Authorization:`Bearer ${a.access_token}`}});if(b.ok){let a=await b.json();a.evaluation&&(o(a.evaluation),A({needScore:a.evaluation.need_score?.toString()||"5",noveltyScore:a.evaluation.novelty_score?.toString()||"5",feasibilityScalabilityScore:a.evaluation.feasibility_scalability_score?.toString()||"5",marketPotentialScore:a.evaluation.market_potential_score?.toString()||"5",impactScore:a.evaluation.impact_score?.toString()||"5",needComment:a.evaluation.need_comment||"",noveltyComment:a.evaluation.novelty_comment||"",feasibilityScalabilityComment:a.evaluation.feasibility_scalability_comment||"",marketPotentialComment:a.evaluation.market_potential_comment||"",impactComment:a.evaluation.impact_comment||"",overallComment:a.evaluation.overall_comment||""}))}}catch(a){console.error("Error fetching evaluation:",a)}},F=(a,b)=>{A(c=>({...c,[a]:b}))},G=async(b=!1)=>{if(!k?.id||!B(k.id)){console.error("Cannot save: invalid application ID"),u("Error: Invalid application ID"),setTimeout(()=>u(""),3e3);return}for(let a of["needScore","noveltyScore","feasibilityScalabilityScore","marketPotentialScore","impactScore"])if(!z[a]||""===z[a].trim()){u("Please provide scores for all criteria (0-10)"),setTimeout(()=>u(""),3e3);return}s(!0),u("");try{let{data:{session:b}}=await e.supabase.auth.getSession();if(!b)return void a.push("/login");if(!k.id||"undefined"===k.id||!B(k.id)){console.error("Invalid params.id in handleSave:",k.id),u("Error: Invalid application ID"),setTimeout(()=>u(""),3e3),s(!1);return}console.log("Saving evaluation for application ID:",k.id);let c=await fetch(`/api/evaluations/application/${k.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${b.access_token}`},body:JSON.stringify({applicationId:k.id,needScore:parseInt(z.needScore),noveltyScore:parseInt(z.noveltyScore),feasibilityScalabilityScore:parseInt(z.feasibilityScalabilityScore),marketPotentialScore:parseInt(z.marketPotentialScore),impactScore:parseInt(z.impactScore),needComment:z.needComment||null,noveltyComment:z.noveltyComment||null,feasibilityScalabilityComment:z.feasibilityScalabilityComment||null,marketPotentialComment:z.marketPotentialComment||null,impactComment:z.impactComment||null,overallComment:z.overallComment||null})}),d=await c.json();c.ok?(u(n?"Evaluation updated successfully":"Evaluation saved successfully"),o(d.evaluation)):u(d.error||"Failed to save evaluation"),setTimeout(()=>u(""),3e3)}catch(a){console.error("Error saving evaluation:",a),u("An error occurred while saving"),setTimeout(()=>u(""),3e3)}finally{s(!1)}};if(p)return(0,b.jsx)("div",{className:"min-h-screen bg-zinc-50 dark:bg-black flex items-center justify-center",children:(0,b.jsx)("p",{className:"text-zinc-600 dark:text-zinc-400",children:"Loading..."})});if(x)return(0,b.jsx)("div",{className:"min-h-screen bg-zinc-50 dark:bg-black flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("p",{className:"text-red-600 dark:text-red-400 mb-4",children:x}),(0,b.jsx)(h.Button,{onClick:()=>a.push("/dashboard"),children:"Return to Dashboard"})]})});if(!l)return(0,b.jsx)("div",{className:"min-h-screen bg-zinc-50 dark:bg-black flex items-center justify-center",children:(0,b.jsx)("p",{className:"text-zinc-600 dark:text-zinc-400",children:"Application not found"})});let H=[parseInt(z.needScore)||0,parseInt(z.noveltyScore)||0,parseInt(z.feasibilityScalabilityScore)||0,parseInt(z.marketPotentialScore)||0,parseInt(z.impactScore)||0].reduce((a,b)=>a+b,0);return(0,b.jsx)(i.default,{children:(0,b.jsxs)("div",{className:"max-w-full mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("button",{onClick:()=>a.push(`/dashboard/applications/${k.id}`),className:"text-zinc-600 dark:text-zinc-400 hover:text-black dark:hover:text-zinc-50",children:"â† Back"}),(0,b.jsx)("h1",{className:"text-xl font-bold text-black dark:text-zinc-50",children:"Evaluate Application"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("div",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:["Total Score:"," ",(0,b.jsxs)("span",{className:"font-bold text-black dark:text-zinc-50",children:[H,"/50"]})]}),(0,b.jsx)(h.Button,{onClick:()=>G(!1),disabled:r,className:"bg-black text-white hover:bg-black/90 dark:bg-black dark:text-white dark:hover:bg-black/90",children:r?"Saving...":"Save Evaluation"})]})]}),t&&(0,b.jsx)("div",{className:"mb-4",children:(0,b.jsx)("div",{className:`p-4 rounded-lg ${t.includes("Failed")||t.includes("error")?"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800":"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800"}`,children:(0,b.jsx)("p",{className:`text-sm ${t.includes("Failed")||t.includes("error")?"text-red-800 dark:text-red-200":"text-green-800 dark:text-green-200"}`,children:t})})}),(0,b.jsx)("div",{className:"py-6",children:(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 h-[calc(100vh-180px)]",children:[(0,b.jsxs)("div",{className:"bg-white dark:bg-zinc-900 rounded-lg shadow-sm border border-zinc-200 dark:border-zinc-800 p-6 overflow-y-auto",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold mb-4 text-black dark:text-zinc-50",children:l.company_name}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-lg font-semibold mb-3 text-black dark:text-zinc-50",children:"Company Information"}),(0,b.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("span",{className:"font-medium text-zinc-600 dark:text-zinc-400",children:["Website:"," "]}),l.website?(0,b.jsx)("a",{href:l.website,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline",children:l.website}):(0,b.jsx)("span",{className:"text-zinc-400",children:"N/A"})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("span",{className:"font-medium text-zinc-600 dark:text-zinc-400",children:["Description:"," "]}),(0,b.jsx)("p",{className:"text-black dark:text-zinc-50 mt-1",children:l.description})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-lg font-semibold mb-3 text-black dark:text-zinc-50",children:"Founder Information"}),(0,b.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("span",{className:"font-medium text-zinc-600 dark:text-zinc-400",children:["Founder:"," "]}),(0,b.jsx)("span",{className:"text-black dark:text-zinc-50",children:l.founder_name})]}),l.co_founders&&(0,b.jsxs)("div",{children:[(0,b.jsxs)("span",{className:"font-medium text-zinc-600 dark:text-zinc-400",children:["Co-Founders:"," "]}),(0,b.jsx)("span",{className:"text-black dark:text-zinc-50",children:l.co_founders})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("span",{className:"font-medium text-zinc-600 dark:text-zinc-400",children:["Email:"," "]}),(0,b.jsx)("a",{href:`mailto:${l.email}`,className:"text-blue-600 dark:text-blue-400 hover:underline",children:l.email})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("span",{className:"font-medium text-zinc-600 dark:text-zinc-400",children:["Phone:"," "]}),(0,b.jsx)("a",{href:`tel:${l.phone}`,className:"text-blue-600 dark:text-blue-400 hover:underline",children:l.phone})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-lg font-semibold mb-3 text-black dark:text-zinc-50",children:"Business Details"}),(0,b.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"font-medium text-zinc-600 dark:text-zinc-400 block mb-1",children:"Problem:"}),(0,b.jsx)("p",{className:"text-black dark:text-zinc-50",children:l.problem})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"font-medium text-zinc-600 dark:text-zinc-400 block mb-1",children:"Solution:"}),(0,b.jsx)("p",{className:"text-black dark:text-zinc-50",children:l.solution})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"font-medium text-zinc-600 dark:text-zinc-400 block mb-1",children:"Target Market:"}),(0,b.jsx)("p",{className:"text-black dark:text-zinc-50",children:l.target_market})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"font-medium text-zinc-600 dark:text-zinc-400 block mb-1",children:"Business Model:"}),(0,b.jsx)("p",{className:"text-black dark:text-zinc-50",children:l.business_model})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-lg font-semibold mb-3 text-black dark:text-zinc-50",children:"Funding & Traction"}),(0,b.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("span",{className:"font-medium text-zinc-600 dark:text-zinc-400",children:["Funding Stage:"," "]}),(0,b.jsx)("span",{className:"text-black dark:text-zinc-50",children:l.funding_stage?.replace("_"," ")||"N/A"})]}),l.funding_amount&&(0,b.jsxs)("div",{children:[(0,b.jsxs)("span",{className:"font-medium text-zinc-600 dark:text-zinc-400",children:["Funding Amount:"," "]}),(0,b.jsx)("span",{className:"text-black dark:text-zinc-50",children:l.funding_amount})]}),l.current_traction&&(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"font-medium text-zinc-600 dark:text-zinc-400 block mb-1",children:"Current Traction:"}),(0,b.jsx)("p",{className:"text-black dark:text-zinc-50",children:l.current_traction})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-lg font-semibold mb-3 text-black dark:text-zinc-50",children:"Why Our Incubator?"}),(0,b.jsx)("p",{className:"text-sm text-black dark:text-zinc-50",children:l.why_incubator})]})]})]}),(0,b.jsxs)("div",{className:"bg-white dark:bg-zinc-900 rounded-lg shadow-sm border border-zinc-200 dark:border-zinc-800 p-6 overflow-y-auto",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold mb-4 text-black dark:text-zinc-50",children:"Evaluation Sheet"}),(0,b.jsxs)("div",{className:"space-y-6",children:[j.map(a=>(0,b.jsxs)("div",{className:"border-b border-zinc-200 dark:border-zinc-800 pb-6 last:border-b-0",children:[(0,b.jsx)(g.Label,{className:"text-base font-semibold text-black dark:text-zinc-50 mb-2 block",children:a.label}),(0,b.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400 mb-4",children:a.description}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsxs)(g.Label,{className:"text-sm text-zinc-700 dark:text-zinc-300",children:["Score (0-10) ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("span",{className:"text-lg font-bold text-black dark:text-zinc-50 min-w-[2rem] text-right",children:z[a.scoreKey]||"5"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("span",{className:"text-xs text-zinc-500 dark:text-zinc-500 w-4",children:"0"}),(0,b.jsx)("input",{type:"range",min:"0",max:"10",step:"1",value:z[a.scoreKey]||"5",onChange:b=>{var c;let d;return c=a.scoreKey,void(!isNaN(d=parseInt(b.target.value))&&d>=0&&d<=10&&A(a=>({...a,[c]:d.toString()})))},className:`flex-1 h-2 bg-zinc-200 dark:bg-zinc-700 rounded-lg appearance-none cursor-pointer 
                            [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-4 [&::-webkit-slider-thumb]:h-4 
                            [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-black [&::-webkit-slider-thumb]:dark:bg-zinc-50
                            [&::-webkit-slider-thumb]:cursor-pointer [&::-webkit-slider-thumb]:shadow-md
                            [&::-moz-range-thumb]:w-4 [&::-moz-range-thumb]:h-4 [&::-moz-range-thumb]:rounded-full 
                            [&::-moz-range-thumb]:bg-black [&::-moz-range-thumb]:dark:bg-zinc-50 [&::-moz-range-thumb]:border-0
                            [&::-moz-range-thumb]:cursor-pointer [&::-moz-range-thumb]:shadow-md`,required:!0}),(0,b.jsx)("span",{className:"text-xs text-zinc-500 dark:text-zinc-500 w-6 text-right",children:"10"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{className:"text-sm text-zinc-700 dark:text-zinc-300",children:"Comment"}),(0,b.jsx)(f.Textarea,{value:z[a.commentKey],onChange:b=>F(a.commentKey,b.target.value),className:"mt-1",rows:4,placeholder:"Enter your evaluation comment..."})]})]})]},a.id)),(0,b.jsxs)("div",{className:"border-t border-zinc-200 dark:border-zinc-800 pt-6",children:[(0,b.jsx)(g.Label,{className:"text-base font-semibold text-black dark:text-zinc-50 mb-2 block",children:"Overall Comment"}),(0,b.jsx)(f.Textarea,{value:z.overallComment,onChange:a=>F("overallComment",a.target.value),className:"mt-1",rows:6,placeholder:"Enter your overall evaluation comment..."})]})]})]})]})})]})})}a.s(["default",()=>k])}];

//# sourceMappingURL=app_dashboard_applications_%5Bid%5D_evaluate_page_tsx_98af475b._.js.map